<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="frank">





<title>å…³äºçŠ¶æ€æœºâ€”â€”ç”¨äº‹ä»¶è§¦å‘çŠ¶æ€ | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">ç¡•çš„é¦–é¡µ</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Something</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">ç¡•çš„é¦–é¡µ</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Something</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // ä¸º 6 æ—¶å±•å¼€æ‰€æœ‰
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // è¿™ä¸ªå€¼æ˜¯ç”± tocbot æºç é‡Œå®šä¹‰çš„ scrollSmoothDuration å¾—æ¥çš„
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">å…³äºçŠ¶æ€æœºâ€”â€”ç”¨äº‹ä»¶è§¦å‘çŠ¶æ€</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">frank</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">åä¸€æœˆ 7, 2025&nbsp;&nbsp;9:27:37</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E7%A8%8B%E5%BA%8F/">ç¨‹åº</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="å…³äºçŠ¶æ€æœºâ€”â€”ç”¨äº‹ä»¶è§¦å‘çŠ¶æ€"><a href="#å…³äºçŠ¶æ€æœºâ€”â€”ç”¨äº‹ä»¶è§¦å‘çŠ¶æ€" class="headerlink" title="å…³äºçŠ¶æ€æœºâ€”â€”ç”¨äº‹ä»¶è§¦å‘çŠ¶æ€"></a>å…³äºçŠ¶æ€æœºâ€”â€”ç”¨äº‹ä»¶è§¦å‘çŠ¶æ€</h1><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ çŠ¶æ€æœºï¼ŸğŸ¤”"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ çŠ¶æ€æœºï¼ŸğŸ¤”" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ çŠ¶æ€æœºï¼ŸğŸ¤”"></a>ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ çŠ¶æ€æœºï¼ŸğŸ¤”</h2><p>â€‹	åœ¨æœ€è¿‘çš„å­¦ä¹ ä¸å®è·µè¿‡ç¨‹ä¸­ï¼Œç¬”è€…é¢‘ç¹åœ°é‡åˆ°éœ€è¦è®¾ç½®å¹¶å˜æ›´å¯¹è±¡çŠ¶æ€çš„æƒ…å½¢ï¼Œè¿™ä¸€è¿‡ç¨‹ä¿ƒä½¿æˆ‘å»æ¢ç´¢æ›´ä¸ºç³»ç»ŸåŒ–çš„è§£å†³æ–¹æ¡ˆâ€”â€”çŠ¶æ€æœºã€‚ä¸ºäº†æ›´å¥½åœ°å¼•å…¥è¿™ä¸ªæ¦‚å¿µï¼Œè®©æˆ‘ä»¬ä»æ—¥å¸¸ç”Ÿæ´»ä¸­æœ€å¸¸è§çš„ä¾‹å­è¯´èµ·ï¼šçº¢ç»¿ç¯ã€‚å°±åƒçº¢ç»¿ç¯æ˜ç¡®æŒ‡ç¤ºç€è½¦è¾†ä½•æ—¶åœæ­¢ã€ä½•æ—¶è¡Œè¿›ä¸€æ ·ï¼ŒçŠ¶æ€æœºä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—æ¸…æ™°ä¸”æœ‰åºçš„æ¡†æ¶ï¼Œç”¨ä»¥ç®¡ç†å’Œè½¬æ¢è½¯ä»¶ç³»ç»Ÿä¸­å¤æ‚çš„çŠ¶æ€é€»è¾‘ã€‚é€šè¿‡å­¦ä¹ å’Œåº”ç”¨çŠ¶æ€æœºï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿæœ‰æ•ˆé¿å…ä»£ç ä¸­çš„æ··ä¹±ä¸å†—ä½™ï¼Œè¿˜èƒ½å¤§å¹…æå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TrafficLight</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">state</span> <span class="operator">=</span> <span class="string">&quot;RED&quot;</span>; <span class="comment">// å½“å‰çŠ¶æ€ï¼šRED, YELLOW, GREEN</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (state.equals(<span class="string">&quot;RED&quot;</span>)) &#123;</span><br><span class="line">            state = <span class="string">&quot;GREEN&quot;</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¢ç¯ â†’ ç»¿ç¯&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state.equals(<span class="string">&quot;GREEN&quot;</span>)) &#123;</span><br><span class="line">            state = <span class="string">&quot;YELLOW&quot;</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç»¿ç¯ â†’ é»„ç¯&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state.equals(<span class="string">&quot;YELLOW&quot;</span>)) &#123;</span><br><span class="line">            state = <span class="string">&quot;RED&quot;</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;é»„ç¯ â†’ çº¢ç¯&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;æœªçŸ¥çŠ¶æ€: &quot;</span> + state);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ä»£ç å¯ä»¥çœ‹å‡ºï¼Œè¿™æ®µä»£ç å­˜åœ¨ååˆ†æ˜æ˜¾çš„é—®é¢˜ï¼š1ã€çŠ¶æ€ä¸è¡Œä¸ºè€¦åˆä¸¥é‡ï¼Œå°†æ‰€æœ‰çš„é€»è¾‘éƒ½å¡åœ¨change()ä¸­ï¼›2ã€è¿åäº†å¼€é—­åŸåˆ™ï¼Œå¦‚æœè¦æ–°å¢çŠ¶æ€å¿…é¡»è¦åœ¨åŸæœ‰ä»£ç ä¸Šä¿®æ”¹ï¼›3ã€éš¾ä»¥å¤ç”¨ï¼Œæ— æ³•ä¸ºä¸åŒçŠ¶æ€å®šä¹‰ä¸“å±è¡Œä¸ºï¼ˆæ¯”å¦‚é»„ç¯æ—¶ä¸èƒ½å¯åŠ¨è½¦è¾†ï¼‰ã€‚</p>
<h2 id="äºŒã€ä»€ä¹ˆæ˜¯çŠ¶æ€æœºğŸ”"><a href="#äºŒã€ä»€ä¹ˆæ˜¯çŠ¶æ€æœºğŸ”" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯çŠ¶æ€æœºğŸ”"></a>äºŒã€ä»€ä¹ˆæ˜¯çŠ¶æ€æœºğŸ”</h2><p>â€‹	åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒçŠ¶æ€æœºï¼ˆFinite State Machine, FSMï¼‰é€šå¸¸æ˜¯æŒ‡æœ‰é™çŠ¶æ€æœºï¼Œå®ƒåŒ…å«æœ‰é™æ•°é‡çš„çŠ¶æ€ï¼Œæ¯ä¸€ç§çŠ¶æ€ä»£è¡¨ç³»ç»Ÿçš„ä¸€ç§çŠ¶å†µã€‚çŠ¶æ€æœºå¯ä»¥æ˜¯ç¡®å®šæ€§çš„ï¼ˆDeterministic Finite State Machine, DFSAï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯éç¡®å®šæ€§çš„ï¼ˆNondeterministic Finite State Machine, NFSAï¼‰ã€‚åœ¨ç¡®å®šæ€§çŠ¶æ€æœºä¸­ï¼Œå¯¹äºä»»ä½•ç»™å®šçš„è¾“å…¥ï¼Œéƒ½æœ‰å”¯ä¸€ä¸€ä¸ªåç»§çŠ¶æ€ï¼›è€Œåœ¨éç¡®å®šæ€§çŠ¶æ€æœºä¸­ï¼Œåˆ™å¯èƒ½æœ‰å¤šä¸ªæˆ–æ²¡æœ‰åç»§çŠ¶æ€ã€‚</p>
<p>çœ‹å­¦æœ¯æ€§è§£é‡Šå¾ˆå¤æ‚å¯¹å§ï¼Œæˆ‘ç»§ç»­æ‹¿ä¸Šè¿°çš„çº¢ç»¿ç¯æ¥ä¸¾ä¾‹ğŸŒ°ã€‚çº¢ç»¿ç¯æœ‰ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li><strong>çº¢ç¯ï¼ˆRedï¼‰</strong></li>
<li><strong>é»„ç¯ï¼ˆYellowï¼‰</strong></li>
<li><strong>ç»¿ç¯ï¼ˆGreenï¼‰</strong></li>
</ul>
<p>å¯¹åº”çš„å®ƒçš„è¡Œä¸ºè§„åˆ™ä¸ºä¸‹åˆ—çš„ä¸‰ç§ï¼š</p>
<ul>
<li><strong>çº¢ç¯ â†’ ç»¿ç¯ï¼ˆäº®èµ·é€šè¡Œï¼‰</strong></li>
<li><strong>ç»¿ç¯ â†’ é»„ç¯ï¼ˆå‡†å¤‡åœæ­¢ï¼‰</strong></li>
<li><strong>é»„ç¯ â†’ çº¢ç¯ï¼ˆç¦æ­¢é€šè¡Œ</strong></li>
</ul>
<p>â€‹	å¹¶ä¸”<strong>ä¸èƒ½è·³è¿‡çŠ¶æ€</strong>ï¼Œåœ¨ç”Ÿæ´»ä½ ä¸ä¼šçœ‹è§çº¢ç¯ç›´æ¥å˜æˆé»„ç¯ï¼Œä¹Ÿä¸ä¼šçœ‹è§ç»¿ç¯ç›´æ¥å˜æˆçº¢ç¯ï¼ˆé™¤éæ•…éšœå¯¹å§ï¼‰ï¼Œè¿™ç§â€œçŠ¶æ€+è§¦å‘æ¡ä»¶â€”&gt;æ–°çŠ¶æ€â€çš„è§„åˆ™ï¼Œå°±æ˜¯çŠ¶æ€æœºçš„æ ¸å¿ƒã€‚</p>
<p>é¡ºä¾¿åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹ï¼ŒçŠ¶æ€æœºçš„<strong>å››ä¸ªåŸºæœ¬è¦ç´ </strong>ï¼š</p>
<table>
<thead>
<tr>
<th>è¦ç´ </th>
<th>è¯´æ˜</th>
<th>çº¢ç»¿ç¯ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>çŠ¶æ€ï¼ˆStateï¼‰</strong></td>
<td>ç³»ç»Ÿå½“å‰æ‰€å¤„çš„æƒ…å½¢</td>
<td><code>RED</code>, <code>YELLOW</code>, <code>GREEN</code></td>
</tr>
<tr>
<td><strong>äº‹ä»¶ï¼ˆEventï¼‰</strong></td>
<td>è§¦å‘çŠ¶æ€è½¬æ¢çš„ä¿¡å·</td>
<td>â€œå®šæ—¶å™¨åˆ°æ—¶â€ã€â€œæ‰‹åŠ¨åˆ‡æ¢â€</td>
</tr>
<tr>
<td><strong>è½¬æ¢ï¼ˆTransitionï¼‰</strong></td>
<td>ä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„è§„åˆ™</td>
<td>RED + timeout â†’ GREEN</td>
</tr>
<tr>
<td><strong>åŠ¨ä½œï¼ˆActionï¼‰</strong>ï¼ˆå¯é€‰ï¼‰</td>
<td>çŠ¶æ€åˆ‡æ¢æ—¶æ‰§è¡Œçš„æ“ä½œ</td>
<td>â€œçº¢ç¯äº®èµ·æ—¶å…³é—­é€šè¡Œä¿¡å·â€</td>
</tr>
</tbody></table>
<p>â€‹	ç›®å‰å¸¸è§çš„çŠ¶æ€æœºå¯ä»¥åˆ†ä¸º<strong>Moore</strong>å‹å’Œ<strong>Mealy</strong>å‹ï¼Œå·®åˆ«åœ¨äºå‰è€…çš„è¾“å‡ºå•çº¯ç”±å¯„å­˜çš„<strong>çŠ¶æ€</strong>å†³å®šï¼Œåè€…çš„è¾“å‡ºç”±<strong>è¾“å…¥</strong>å’Œ<strong>çŠ¶æ€</strong>è¾“å‡ºåŒæ—¶å†³å®šã€‚</p>
<p><strong>Moore å‹</strong>ï¼šè¾“å‡ºåªä¾èµ–å½“å‰çŠ¶æ€ï¼ˆå¦‚çº¢ç¯äº® &#x3D; è¾“å‡ºâ€œåœâ€ï¼‰</p>
<p><strong>Mealy å‹</strong>ï¼šè¾“å‡ºä¾èµ–â€œå½“å‰çŠ¶æ€ + è¾“å…¥äº‹ä»¶â€ï¼ˆè¾ƒå°‘ç”¨äºä¸šåŠ¡ç³»ç»Ÿï¼‰</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/pZpUvwt"><img src="https://s21.ax1x.com/2025/11/07/pZpUvwt.png" alt="pZpUvwt.png"></a></p>
<p>å°ç»“ï¼šçŠ¶æ€æœºå¹¶ä¸æ˜¯ä»€ä¹ˆçš„ç®—æ³•ï¼Œè€Œæ˜¯ä¸€ç§ğŸ’¡å»ºæ¨¡æ€æƒ³ï¼šâ€œ<strong>çŠ¶æ€+è§¦å‘æ¡ä»¶â€”&gt;æ–°çŠ¶æ€</strong>â€ï¼Œå¦‚æœä½ ç›®å‰çš„éœ€è¦å¤„ç†çš„å¯¹è±¡ï¼Œæœ‰å¤šä¸ªçŠ¶æ€ï¼ˆé˜¶æ®µï¼‰å¹¶ä¸”çŠ¶æ€ç›´æ¥æœ‰ä¸¥æ ¼ã€æ˜æ˜¾çš„é¡ºåºè§„åˆ™ï¼Œå¯ä»¥è¯•è¯•è¿ç”¨çŠ¶æ€ã€‚</p>
<h2 id="ä¸‰ã€å®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºğŸ’»"><a href="#ä¸‰ã€å®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºğŸ’»" class="headerlink" title="ä¸‰ã€å®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºğŸ’»"></a>ä¸‰ã€å®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºğŸ’»</h2><p>â€‹	è¿™æ¬¡ç”¨å¤§å®¶éƒ½ç†Ÿæ‚‰çš„è®¢å•æ¥åšdemoå§ï¼Œå…ˆè§„å®šä¸€ä¸‹è®¢å•çŠ¶æ€æµè½¬çš„åº”ç”¨åœºæ™¯ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATED â†’ PAID â†’ SHIPPED â†’ DELIVERED</span><br><span class="line">   â†“         â†“</span><br><span class="line">CANCELLED  CANCELLED</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>äº‹ä»¶</strong>ï¼šæ”¯ä»˜ï¼ˆpayï¼‰ã€å‘è´§ï¼ˆshipï¼‰ã€ç¡®è®¤æ”¶è´§ï¼ˆdeliverï¼‰ã€å–æ¶ˆï¼ˆcancelï¼‰</p>
</li>
<li><p><strong>çº¦æŸ</strong>ï¼š</p>
<ul>
<li><p>åªæœ‰ <code>CREATED</code> çŠ¶æ€æ‰èƒ½æ”¯ä»˜æˆ–å–æ¶ˆ</p>
</li>
<li><p>åªæœ‰ <code>PAID</code> çŠ¶æ€æ‰èƒ½å‘è´§æˆ–å–æ¶ˆ</p>
</li>
<li><p><code>SHIPPED</code> çŠ¶æ€æ‰èƒ½ç¡®è®¤æ”¶è´§</p>
</li>
<li><p>ä¸€æ—¦ <code>CANCELLED</code> æˆ– <code>DELIVERED</code>ï¼Œä¸èƒ½å†æ“ä½œ</p>
</li>
</ul>
</li>
</ul>
<h3 id="çŠ¶æ€æœº1-0"><a href="#çŠ¶æ€æœº1-0" class="headerlink" title="çŠ¶æ€æœº1.0"></a>çŠ¶æ€æœº1.0</h3><p>ç¬”è€…å­¦ä¹ çŠ¶æ€æœºä¹Ÿæ˜¯å…ˆæ‰‹æ“äº†ä¸€ä¸ªæœ€ç®€å•çš„çŠ¶æ€æœºï¼Œå…ˆç§°ä¸ºçŠ¶æ€æœº1.0å§ã€‚è¿ç”¨æœ€åŸå§‹çš„if-elseæ¥å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰çŠ¶æ€</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    CREATED, PAID, SHIPPED, DELIVERED, CANCELLED</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">OrderEvent</span> &#123;</span><br><span class="line">    PAY, SHIP, DELIVER, CANCEL</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çŠ¶æ€æœºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderStateMachine</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">OrderState</span> <span class="variable">currentState</span> <span class="operator">=</span> OrderState.CREATED;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleEvent</span><span class="params">(OrderEvent event)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (currentState) &#123;</span><br><span class="line">            <span class="keyword">case</span> CREATED:</span><br><span class="line">                <span class="keyword">if</span> (event == OrderEvent.PAY) &#123;</span><br><span class="line">                    currentState = OrderState.PAID;</span><br><span class="line">                    System.out.println(<span class="string">&quot;è®¢å•å·²æ”¯ä»˜&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event == OrderEvent.CANCEL) &#123;</span><br><span class="line">                    currentState = OrderState.CANCELLED;</span><br><span class="line">                    System.out.println(<span class="string">&quot;è®¢å•å·²å–æ¶ˆ&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;æ— æ•ˆäº‹ä»¶: &quot;</span> + event + <span class="string">&quot; å½“å‰çŠ¶æ€: &quot;</span> + currentState);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> PAID:</span><br><span class="line">                <span class="keyword">if</span> (event == OrderEvent.SHIP) &#123;</span><br><span class="line">                    currentState = OrderState.SHIPPED;</span><br><span class="line">                    System.out.println(<span class="string">&quot;è®¢å•å·²å‘è´§&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event == OrderEvent.CANCEL) &#123;</span><br><span class="line">                    currentState = OrderState.CANCELLED;</span><br><span class="line">                    System.out.println(<span class="string">&quot;è®¢å•å·²å–æ¶ˆ&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;æ— æ•ˆäº‹ä»¶: &quot;</span> + event + <span class="string">&quot; å½“å‰çŠ¶æ€: &quot;</span> + currentState);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">// å…¶ä»–çŠ¶æ€å¤„ç†...</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;æœªçŸ¥çŠ¶æ€: &quot;</span> + currentState);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> OrderState <span class="title function_">getCurrentState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> currentState;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>âœ…ä¼˜ç‚¹</strong>ï¼šç®€å•ç›´è§‚ï¼Œæ˜“äºç†è§£ã€‚<br><strong>âš ï¸ç¼ºç‚¹</strong>ï¼šçŠ¶æ€å’Œè½¬æ¢é€»è¾‘è€¦åˆåœ¨ä»£ç ä¸­ï¼Œå¤æ‚ç³»ç»Ÿéš¾ä»¥ç»´æŠ¤ã€‚</p>
<h3 id="çŠ¶æ€æœº2-0"><a href="#çŠ¶æ€æœº2-0" class="headerlink" title="çŠ¶æ€æœº2.0"></a>çŠ¶æ€æœº2.0</h3><p>â€‹	éšåå­¦ä¹ äº†çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ï¼Œå°†æ¯ä¸ªçŠ¶æ€å°è£…ä¸ºä¸€ä¸ªç±»ï¼Œä½¿çŠ¶æ€è½¬æ¢æ›´æ¸…æ™°ã€å¯æ‰©å±•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">interface State &#123;</span><br><span class="line">    void handlePay(OrderContext context);</span><br><span class="line">    void handleCancel(OrderContext context);</span><br><span class="line">    // å…¶ä»–äº‹ä»¶...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class CreatedState implements State &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void handlePay(OrderContext context) &#123;</span><br><span class="line">        System.out.println(&quot;è®¢å•å·²æ”¯ä»˜&quot;);</span><br><span class="line">        context.setState(new PaidState());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void handleCancel(OrderContext context) &#123;</span><br><span class="line">        System.out.println(&quot;è®¢å•å·²å–æ¶ˆ&quot;);</span><br><span class="line">        context.setState(new CancelledState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// OrderContext ä½œä¸ºä¸Šä¸‹æ–‡æŒæœ‰å½“å‰çŠ¶æ€</span><br><span class="line">class OrderContext &#123;</span><br><span class="line">    private State state;</span><br><span class="line"></span><br><span class="line">    public OrderContext() &#123;</span><br><span class="line">        this.state = new CreatedState();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setState(State state) &#123;</span><br><span class="line">        this.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void pay() &#123;</span><br><span class="line">        state.handlePay(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void cancel() &#123;</span><br><span class="line">        state.handleCancel(this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°æ˜¯ä»£ç å®ç°ç»“æ„ï¼Œä¸‹é¢ä¸ºå®Œæ•´åŸºäºçŠ¶æ€æ¨¡å¼å®ç°çŠ¶æ€æœºçš„æ­¥éª¤ï¼š</p>
<h4 id="ç¬¬ä¸€æ­¥ï¼šå®šä¹‰çŠ¶æ€æšä¸¾ï¼ˆå¯é€‰ï¼Œç”¨äºæ—¥å¿—æˆ–å¤–éƒ¨è¡¨ç¤ºï¼‰"><a href="#ç¬¬ä¸€æ­¥ï¼šå®šä¹‰çŠ¶æ€æšä¸¾ï¼ˆå¯é€‰ï¼Œç”¨äºæ—¥å¿—æˆ–å¤–éƒ¨è¡¨ç¤ºï¼‰" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®šä¹‰çŠ¶æ€æšä¸¾ï¼ˆå¯é€‰ï¼Œç”¨äºæ—¥å¿—æˆ–å¤–éƒ¨è¡¨ç¤ºï¼‰"></a>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰çŠ¶æ€æšä¸¾ï¼ˆå¯é€‰ï¼Œç”¨äºæ—¥å¿—æˆ–å¤–éƒ¨è¡¨ç¤ºï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// OrderStatus.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">OrderStatus</span> &#123;</span><br><span class="line">    CREATED, PAID, SHIPPED, DELIVERED, CANCELLED</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸Šä¸‹æ–‡ç±»ï¼ˆOrderContextï¼‰"><a href="#ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸Šä¸‹æ–‡ç±»ï¼ˆOrderContextï¼‰" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸Šä¸‹æ–‡ç±»ï¼ˆOrderContextï¼‰"></a>ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸Šä¸‹æ–‡ç±»ï¼ˆOrderContextï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// OrderContext.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderContext</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> OrderState state;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String orderId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OrderContext</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orderId = orderId;</span><br><span class="line">        <span class="built_in">this</span>.state = <span class="keyword">new</span> <span class="title class_">CreatedState</span>(); <span class="comment">// åˆå§‹çŠ¶æ€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›çš„æ“ä½œæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[&quot;</span> + orderId + <span class="string">&quot;] è§¦å‘äº‹ä»¶: æ”¯ä»˜&quot;</span>);</span><br><span class="line">        state.onPay(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ship</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[&quot;</span> + orderId + <span class="string">&quot;] è§¦å‘äº‹ä»¶: å‘è´§&quot;</span>);</span><br><span class="line">        state.onShip(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deliver</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[&quot;</span> + orderId + <span class="string">&quot;] è§¦å‘äº‹ä»¶: ç¡®è®¤æ”¶è´§&quot;</span>);</span><br><span class="line">        state.onDeliver(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[&quot;</span> + orderId + <span class="string">&quot;] è§¦å‘äº‹ä»¶: å–æ¶ˆ&quot;</span>);</span><br><span class="line">        state.onCancel(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¾›çŠ¶æ€ç±»å†…éƒ¨åˆ‡æ¢çŠ¶æ€ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(OrderState state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">        System.out.println(<span class="string">&quot;[&quot;</span> + orderId + <span class="string">&quot;] çŠ¶æ€å˜æ›´ä¸º: &quot;</span> + state.getStatus());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> OrderStatus <span class="title function_">getCurrentStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state.getStatus();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰çŠ¶æ€æ¥å£"><a href="#ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰çŠ¶æ€æ¥å£" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰çŠ¶æ€æ¥å£"></a>ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰çŠ¶æ€æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// OrderState.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onPay</span><span class="params">(OrderContext context)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onShip</span><span class="params">(OrderContext context)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onDeliver</span><span class="params">(OrderContext context)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(OrderContext context)</span>;</span><br><span class="line">    OrderStatus <span class="title function_">getStatus</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬å››æ­¥ï¼šå®ç°å„ä¸ªå…·ä½“çŠ¶æ€ç±»"><a href="#ç¬¬å››æ­¥ï¼šå®ç°å„ä¸ªå…·ä½“çŠ¶æ€ç±»" class="headerlink" title="ç¬¬å››æ­¥ï¼šå®ç°å„ä¸ªå…·ä½“çŠ¶æ€ç±»"></a>ç¬¬å››æ­¥ï¼šå®ç°å„ä¸ªå…·ä½“çŠ¶æ€ç±»</h4><h5 id="1-CreatedStateï¼ˆå·²åˆ›å»ºï¼‰"><a href="#1-CreatedStateï¼ˆå·²åˆ›å»ºï¼‰" class="headerlink" title="1.CreatedStateï¼ˆå·²åˆ›å»ºï¼‰"></a>1.CreatedStateï¼ˆå·²åˆ›å»ºï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²åˆ›å»ºï¼šä»…å…è®¸æ”¯ä»˜æˆ–å–æ¶ˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CreatedState</span> <span class="keyword">implements</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPay</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        context.setState(<span class="keyword">new</span> <span class="title class_">PaidState</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShip</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•æœªæ”¯ä»˜ï¼Œä¸èƒ½å‘è´§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDeliver</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•æœªå‘è´§ï¼Œä¸èƒ½ç¡®è®¤æ”¶è´§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        context.setState(<span class="keyword">new</span> <span class="title class_">CancelledState</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> OrderStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> OrderStatus.CREATED;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-PaidStateï¼ˆå·²æ”¯ä»˜ï¼‰"><a href="#2-PaidStateï¼ˆå·²æ”¯ä»˜ï¼‰" class="headerlink" title="2.PaidStateï¼ˆå·²æ”¯ä»˜ï¼‰"></a>2.PaidStateï¼ˆå·²æ”¯ä»˜ï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²æ”¯ä»˜ï¼šä»…å…è®¸å‘è´§æˆ–å–æ¶ˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaidState</span> <span class="keyword">implements</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPay</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²æ”¯ä»˜ï¼Œä¸èƒ½é‡å¤æ”¯ä»˜&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShip</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        context.setState(<span class="keyword">new</span> <span class="title class_">ShippedState</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDeliver</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•æœªå‘è´§ï¼Œä¸èƒ½ç¡®è®¤æ”¶è´§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        context.setState(<span class="keyword">new</span> <span class="title class_">CancelledState</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> OrderStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> OrderStatus.PAID;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-ShippedStateï¼ˆå·²å‘è´§ï¼‰"><a href="#3-ShippedStateï¼ˆå·²å‘è´§ï¼‰" class="headerlink" title="3. ShippedStateï¼ˆå·²å‘è´§ï¼‰"></a>3. ShippedStateï¼ˆå·²å‘è´§ï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²å‘è´§ï¼šä»…å…è®¸ç¡®è®¤æ”¶è´§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShippedState</span> <span class="keyword">implements</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPay</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å‘è´§ï¼Œä¸èƒ½æ”¯ä»˜&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShip</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å‘è´§ï¼Œä¸èƒ½é‡å¤å‘è´§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDeliver</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        context.setState(<span class="keyword">new</span> <span class="title class_">DeliveredState</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å‘è´§ï¼Œä¸èƒ½å–æ¶ˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> OrderStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> OrderStatus.SHIPPED;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-DeliveredStateï¼ˆå·²æ”¶è´§ï¼‰"><a href="#4-DeliveredStateï¼ˆå·²æ”¶è´§ï¼‰" class="headerlink" title="4. DeliveredStateï¼ˆå·²æ”¶è´§ï¼‰"></a>4. DeliveredStateï¼ˆå·²æ”¶è´§ï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²å®Œæˆï¼šæ‰€æœ‰æ“ä½œç¦æ­¢ï¼ˆç»ˆæ€ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeliveredState</span> <span class="keyword">implements</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPay</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å®Œæˆï¼Œä¸èƒ½æ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShip</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å®Œæˆï¼Œä¸èƒ½æ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDeliver</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å®Œæˆï¼Œä¸èƒ½é‡å¤ç¡®è®¤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å®Œæˆï¼Œä¸èƒ½å–æ¶ˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> OrderStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> OrderStatus.DELIVERED;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-CancelledStateï¼ˆå·²å–æ¶ˆï¼‰"><a href="#5-CancelledStateï¼ˆå·²å–æ¶ˆï¼‰" class="headerlink" title="5. CancelledStateï¼ˆå·²å–æ¶ˆï¼‰"></a>5. CancelledStateï¼ˆå·²å–æ¶ˆï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²å–æ¶ˆï¼šæ‰€æœ‰æ“ä½œç¦æ­¢ï¼ˆç»ˆæ€ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CancelledState</span> <span class="keyword">implements</span> <span class="title class_">OrderState</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPay</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å–æ¶ˆï¼Œä¸èƒ½æ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShip</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å–æ¶ˆï¼Œä¸èƒ½æ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDeliver</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å–æ¶ˆï¼Œä¸èƒ½æ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(OrderContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²å–æ¶ˆï¼Œä¸èƒ½é‡å¤å–æ¶ˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> OrderStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> OrderStatus.CANCELLED;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæ¯ä¸ªçŠ¶æ€ç±»<strong>åªå®šä¹‰è‡ªå·±åˆæ³•çš„è¡Œä¸º</strong>ï¼Œå…¶ä½™æ“ä½œä¸€å¾‹æ‹’ç»ã€‚</p>
<ul>
<li><p><code>CreatedState</code> ä¸“æ³¨å¤„ç†â€œæ”¯ä»˜â€å’Œâ€œå–æ¶ˆâ€ï¼›</p>
</li>
<li><p><code>ShippedState</code> åªå“åº”â€œç¡®è®¤æ”¶è´§â€ï¼›</p>
</li>
<li><p>ç»ˆæ€ï¼ˆ<code>DeliveredState</code> &#x2F; <code>CancelledState</code>ï¼‰å½»åº•å°é—­ã€‚<br>è¿™ç§è®¾è®¡è®©çŠ¶æ€é€»è¾‘<strong>é«˜åº¦å†…èšã€äº’ä¸å¹²æ‰°</strong>ï¼Œæœªæ¥å³ä½¿æ–°å¢â€œé€€æ¬¾â€çŠ¶æ€ï¼Œä¹Ÿæ— éœ€ä¿®æ”¹ä»»ä½•ç°æœ‰ç±»</p>
</li>
</ul>
<h4 id="ç¬¬äº”æ­¥ï¼šæµ‹è¯•ä½¿ç”¨"><a href="#ç¬¬äº”æ­¥ï¼šæµ‹è¯•ä½¿ç”¨" class="headerlink" title="ç¬¬äº”æ­¥ï¼šæµ‹è¯•ä½¿ç”¨"></a>ç¬¬äº”æ­¥ï¼šæµ‹è¯•ä½¿ç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Main.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">OrderContext</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderContext</span>(<span class="string">&quot;ORDER_123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰çŠ¶æ€: &quot;</span> + order.getCurrentStatus());</span><br><span class="line"></span><br><span class="line">        order.pay();       <span class="comment">// CREATED â†’ PAID</span></span><br><span class="line">        order.ship();      <span class="comment">// PAID â†’ SHIPPED</span></span><br><span class="line">        order.deliver();   <span class="comment">// SHIPPED â†’ DELIVERED</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è¯•éæ³•æ“ä½œ</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            order.cancel(); <span class="comment">// åº”è¯¥æŠ›å¼‚å¸¸</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalStateException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;âŒ æ“ä½œå¤±è´¥: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æœ€ç»ˆçŠ¶æ€: &quot;</span> + order.getCurrentStatus());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰çŠ¶æ€: CREATED</span><br><span class="line">[ORDER_123] è§¦å‘äº‹ä»¶: æ”¯ä»˜</span><br><span class="line">[ORDER_123] çŠ¶æ€å˜æ›´ä¸º: PAID</span><br><span class="line">[ORDER_123] è§¦å‘äº‹ä»¶: å‘è´§</span><br><span class="line">[ORDER_123] çŠ¶æ€å˜æ›´ä¸º: SHIPPED</span><br><span class="line">[ORDER_123] è§¦å‘äº‹ä»¶: ç¡®è®¤æ”¶è´§</span><br><span class="line">[ORDER_123] çŠ¶æ€å˜æ›´ä¸º: DELIVERED</span><br><span class="line">[ORDER_123] è§¦å‘äº‹ä»¶: å–æ¶ˆ</span><br><span class="line">âŒ æ“ä½œå¤±è´¥: è®¢å•å·²å®Œæˆï¼Œä¸èƒ½å–æ¶ˆ</span><br><span class="line">æœ€ç»ˆçŠ¶æ€: DELIVERED</span><br></pre></td></tr></table></figure>

<h4 id="å¦‚ä½•åœ¨çœŸå®çš„é¡¹ç›®ä½¿ç”¨ï¼Ÿ"><a href="#å¦‚ä½•åœ¨çœŸå®çš„é¡¹ç›®ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨çœŸå®çš„é¡¹ç›®ä½¿ç”¨ï¼Ÿ"></a>å¦‚ä½•åœ¨çœŸå®çš„é¡¹ç›®ä½¿ç”¨ï¼Ÿ</h4><ul>
<li><p><strong>æ³¨å…¥åˆ° Service å±‚</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">payOrder</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="type">OrderContext</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderContext</span>(orderId);</span><br><span class="line">        <span class="comment">// ä»æ•°æ®åº“åŠ è½½å½“å‰çŠ¶æ€ï¼Œè®¾ç½®å¯¹åº”çš„çŠ¶æ€å¯¹è±¡ï¼ˆéœ€æ‰©å±•ï¼‰</span></span><br><span class="line">        order.pay();</span><br><span class="line">        <span class="comment">// ä¿å­˜æ–°çŠ¶æ€åˆ°æ•°æ®åº“</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ…<strong>ä¼˜ç‚¹</strong>ï¼šç¬¦åˆå¼€é—­åŸåˆ™ï¼Œæ˜“äºæ‰©å±•æ–°çŠ¶æ€ã€‚<br><strong>âš ï¸ç¼ºç‚¹</strong>ï¼šç±»æ•°é‡å¢å¤šï¼Œé€‚åˆä¸­å¤§å‹é¡¹ç›®</p>
<h3 id="çŠ¶æ€æœº3-0"><a href="#çŠ¶æ€æœº3-0" class="headerlink" title="çŠ¶æ€æœº3.0"></a>çŠ¶æ€æœº3.0</h3><p>â€‹	åç»­å­¦ä¹ å‘ç°ï¼ŒSpringBootæä¾›äº†åŸç”Ÿçš„çŠ¶æ€æœºï¼Œåˆæ¬¡ä¹‹å¤–è¿˜æœ‰å…¶ä»–ç¬¬ä¸‰æ–¹çš„çŠ¶æ€æœºï¼Œä¾‹å¦‚ï¼š <strong>Squirrel State Machine</strong>ï¼ˆGitHub: <a target="_blank" rel="noopener" href="https://github.com/hekailiang/squirrel%EF%BC%89%E3%80%81**Cola">https://github.com/hekailiang/squirrelï¼‰ã€**Cola</a> State Machineï¼ˆé˜¿é‡Œå·´å·´å¼€æºï¼‰**</p>
<p>ï¼ˆ<strong>GitHub</strong>: <a target="_blank" rel="noopener" href="https://github.com/alibaba/COLA%EF%BC%89%E3%80%81">https://github.com/alibaba/COLAï¼‰ã€</a> <strong>Easy Stateï¼ˆè½»é‡çº§ï¼‰</strong>ï¼ˆGitHub: <a target="_blank" rel="noopener" href="https://github.com/oxo42/easy-state%EF%BC%89%E3%80%82">https://github.com/oxo42/easy-stateï¼‰ã€‚</a></p>
<p>â€‹	å› ä¸ºæ—¶é—´åŸå› ç¬”è€…ä¹Ÿè¿˜æ²¡æœ‰è¯¦ç»†å­¦ä¹ ï¼Œå°±å…ˆç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹çŠ¶æ€æœºå°±ä»¥SpringBootæä¾›çš„ä¸ºä¾‹ï¼Œè°è®©javaå·¥ç¨‹å¸ˆåˆåSpringå·¥ç¨‹å¸ˆå‘¢ğŸ˜‚ã€‚</p>
<h4 id="Maven-ä¾èµ–ï¼š"><a href="#Maven-ä¾èµ–ï¼š" class="headerlink" title="Maven ä¾èµ–ï¼š"></a>Maven ä¾èµ–ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-statemachine-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.0</span><span class="number">.0</span>&lt;/version&gt; &lt;!-- è¯·æ ¹æ® Spring Boot ç‰ˆæœ¬é€‰æ‹© --&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="ç®€å•é…ç½®ç¤ºä¾‹ï¼š"><a href="#ç®€å•é…ç½®ç¤ºä¾‹ï¼š" class="headerlink" title="ç®€å•é…ç½®ç¤ºä¾‹ï¼š"></a><strong>ç®€å•é…ç½®ç¤ºä¾‹</strong>ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableStateMachine</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StateMachineConfig</span> <span class="keyword">extends</span> <span class="title class_">EnumStateMachineConfigurerAdapter</span>&lt;OrderState, OrderEvent&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(StateMachineStateConfigurer&lt;OrderState, OrderEvent&gt; states)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        states</span><br><span class="line">            .withStates()</span><br><span class="line">            .initial(OrderState.CREATED)</span><br><span class="line">            .states(EnumSet.allOf(OrderState.class));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(StateMachineTransitionConfigurer&lt;OrderState, OrderEvent&gt; transitions)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        transitions</span><br><span class="line">            .withExternal().source(OrderState.CREATED).target(OrderState.PAID).event(OrderEvent.PAY)</span><br><span class="line">            .and()</span><br><span class="line">            .withExternal().source(OrderState.PAID).target(OrderState.SHIPPED).event(OrderEvent.SHIP)</span><br><span class="line">            .and()</span><br><span class="line">            .withExternal().source(OrderState.CREATED).target(OrderState.CANCELLED).event(OrderEvent.CANCEL);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>âœ…ä¼˜ç‚¹</strong>ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒæŒä¹…åŒ–ã€ç›‘å¬å™¨ã€åµŒå¥—çŠ¶æ€ç­‰ã€‚<br><strong>âš ï¸ç¼ºç‚¹</strong>ï¼šå­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œé€‚åˆä¼ä¸šçº§åº”ç”¨</p>
<h2 id="å››ã€æ€»ç»“ğŸ§ "><a href="#å››ã€æ€»ç»“ğŸ§ " class="headerlink" title="å››ã€æ€»ç»“ğŸ§ "></a>å››ã€æ€»ç»“ğŸ§ </h2><p>â€‹	é€šè¿‡ä»çº¢ç»¿ç¯åˆ°è®¢å•çŠ¶æ€æµè½¬çš„é€æ­¥å®è·µï¼Œæˆ‘ä»¬çœ‹åˆ°äº†çŠ¶æ€æœºå¦‚ä½•å°†æ··ä¹±çš„ <code>if-else</code> é€»è¾‘ï¼Œè½¬åŒ–ä¸ºæ¸…æ™°ã€å®‰å…¨ã€å¯æ‰©å±•çš„çŠ¶æ€æ¨¡å‹ã€‚</p>
<ul>
<li><strong>çŠ¶æ€æœº 1.0ï¼ˆif-elseï¼‰</strong> è™½ç„¶ç®€å•ï¼Œä½†éš¾ä»¥ç»´æŠ¤ï¼›</li>
<li><strong>çŠ¶æ€æœº 2.0ï¼ˆçŠ¶æ€æ¨¡å¼ï¼‰</strong> é€šè¿‡â€œè¡Œä¸ºå±€éƒ¨åŒ–â€ï¼Œè®©æ¯ä¸ªçŠ¶æ€åªå…³å¿ƒè‡ªå·±çš„èŒè´£ï¼Œæ—¢ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œåˆå¤©ç„¶é˜²æ­¢éæ³•æ“ä½œï¼›</li>
<li><strong>çŠ¶æ€æœº 3.0ï¼ˆSpring State Machineï¼‰</strong> åˆ™ä¸ºå¤æ‚ä¼ä¸šçº§åœºæ™¯æä¾›äº†æŒä¹…åŒ–ã€ç›‘å¬å™¨ã€åµŒå¥—çŠ¶æ€ç­‰é«˜çº§èƒ½åŠ›ã€‚</li>
</ul>
<p>çŠ¶æ€æœºçš„æœ¬è´¨ï¼Œä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸€ç§<strong>å¯¹ä¸šåŠ¡è§„åˆ™çš„å°Šé‡</strong>â€”â€”å®ƒå¼ºè¿«æˆ‘ä»¬å°†éšæ€§çš„æµç¨‹æ˜¾å¼è¡¨è¾¾å‡ºæ¥ï¼Œè®©ä»£ç æˆä¸ºä¸šåŠ¡è¯­è¨€çš„å¿ å®æ˜ å°„ã€‚</p>
<p>å½“ä½ çš„å¯¹è±¡æ‹¥æœ‰å¤šä¸ªçŠ¶æ€ã€ä¸”çŠ¶æ€é—´å­˜åœ¨ä¸¥æ ¼æµè½¬è§„åˆ™æ—¶ï¼Œä¸å¦¨è¯•è¯•çŠ¶æ€æœºã€‚å®ƒå¯èƒ½ä¸ä¼šè®©ä½ å†™å¾—æ›´å¿«ï¼Œä½†ä¸€å®šä¼šè®©ä½ æ”¹å¾—æ›´å®‰å¿ƒï¼Œé”™å¾—æ›´å°‘ã€‚</p>
<p><strong>å¥½çš„çŠ¶æ€è®¾è®¡ï¼Œæœ¬èº«å°±æ˜¯ä¸€é“é˜²çº¿ã€‚</strong></p>
<h2 id="äº”ã€å»¶ä¼¸é˜…è¯»-èµ„æºæ¨èğŸ“š"><a href="#äº”ã€å»¶ä¼¸é˜…è¯»-èµ„æºæ¨èğŸ“š" class="headerlink" title="äº”ã€å»¶ä¼¸é˜…è¯» &amp; èµ„æºæ¨èğŸ“š"></a>äº”ã€å»¶ä¼¸é˜…è¯» &amp; èµ„æºæ¨èğŸ“š</h2><p>å¦‚æœä½ å¯¹çŠ¶æ€æœºæ„Ÿå…´è¶£ï¼Œä»¥ä¸‹æ–‡ç« å’Œé¡¹ç›®å€¼å¾—æ·±å…¥å­¦ä¹ ï¼š</p>
<ul>
<li>ğŸ“˜ <a target="_blank" rel="noopener" href="https://www.oreilly.com/library/view/head-first-design/0596007124/">ã€ŠçŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰â€”â€” Head First è®¾è®¡æ¨¡å¼ã€‹</a><br> ç»å…¸è®¾è®¡æ¨¡å¼å…¥é—¨ï¼Œç”¨ç”Ÿæ´»åŒ–ä¾‹å­è®²è§£çŠ¶æ€æ¨¡å¼ã€‚</li>
<li>ğŸ§  <a target="_blank" rel="noopener" href="https://www.baeldung.com/java-finite-state-machine">ã€ŠFinite State Machines in Javaã€‹ â€“ Baeldung</a><br> æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨å¤šç§æ–¹å¼å®ç°çŠ¶æ€æœºï¼Œå«å®Œæ•´ä»£ç ç¤ºä¾‹ã€‚</li>
<li>âš™ï¸ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-statemachine/docs/current/reference/">Spring State Machine å®˜æ–¹æ–‡æ¡£</a><br> ä¼ä¸šçº§çŠ¶æ€æœºæ¡†æ¶ï¼Œæ”¯æŒæŒä¹…åŒ–ã€ç›‘å¬å™¨ã€åµŒå¥—çŠ¶æ€ç­‰é«˜çº§ç‰¹æ€§ã€‚</li>
<li>ğŸ› ï¸ <a target="_blank" rel="noopener" href="https://github.com/alibaba/COLA">é˜¿é‡Œå·´å·´ COLA çŠ¶æ€æœº</a><br> è½»é‡ã€é«˜æ€§èƒ½çš„çŠ¶æ€æœºå®ç°ï¼Œé€‚åˆå¤æ‚ä¸šåŠ¡æµç¨‹ç¼–æ’ã€‚</li>
<li>ğŸ® <a target="_blank" rel="noopener" href="https://gameprogrammingpatterns.com/state.html">State Machines: A Beginnerâ€™s Guide â€“ Game Programming Patterns</a><br> è™½ç„¶é¢å‘æ¸¸æˆå¼€å‘ï¼Œä½†å¯¹ç†è§£çŠ¶æ€æœºæœ¬è´¨ææœ‰å¸®åŠ©ã€‚</li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>frank</span>
                    </p>
                
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E7%A7%91%E6%8A%80/"># ç§‘æŠ€</a>
                    
                        <a href="/tags/Java/"># Java</a>
                    
                        <a href="/tags/%E7%8A%B6%E6%80%81%E6%9C%BA/"># çŠ¶æ€æœº</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2023/03/17/2023-03-17-%E9%A2%9C%E6%8E%A7%E9%80%9F%E5%85%A5%EF%BC%8C%E5%85%A8%E5%A5%97%E7%99%BD%E8%89%B2%E7%9A%84%E4%B8%BB%E6%9C%BA%E4%BD%A0%E8%A7%81%E8%BF%87%E5%90%97%EF%BC%9F%E7%99%BD%E8%89%B2%E5%85%A8%E5%AE%B6%E6%A1%B6%E6%90%AD%E9%85%8D%E8%AF%84%E6%B5%8B%E6%8C%87%E5%8D%97/">é¢œæ§é€Ÿå…¥ï¼Œå…¨å¥—ç™½è‰²çš„ä¸»æœºä½ è§è¿‡å—ï¼Ÿç™½è‰²å…¨å®¶æ¡¶æ­é…è¯„æµ‹æŒ‡å—</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© frank | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>